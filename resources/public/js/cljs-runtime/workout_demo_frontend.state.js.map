{"version":3,"sources":["workout_demo_frontend/state.cljs"],"mappings":";AAGA,AAAKA,+CAAW,gDAAA,hDAACC;AAEjB,AAAA,uCAAA,+CAAAC,tFAAMM;AAAN,AAAA,IAAAL,qBAAA;AAAA,AAAA,IAAAC,0BAAA,AAAA;AAAA,AAAA,IAAAC,wBAAA;;AAAA,AAAA,GAAA,CAAAA,wBAAAD;AAAA,AAAA,AAAAD,wBAAA,CAAA,UAAAE;;AAAA,eAAA,CAAAA,wBAAA;;;;AAAA;;;;AAAA,IAAAC,uBAAA,EAAA,CAAA,MAAA,AAAAH,4BAAA,AAAA,KAAAI,qBAAA,AAAAJ,yBAAA,KAAA,IAAA,OAAA;AAAA,AAAA,OAAAK,0EAAA,CAAA,UAAA,MAAA,CAAA,UAAA,MAAAF;;;AAAA,AAAA,CAAA,4EAAA,5EAAME,uFAAUO,OAAOC,IAAMC;AAA7B,AACE,IAAMC,QAAM,CAACC,sEAAAA,wEAAAA;IACPC,UAAQ,yBAAA,2CAAA,gGAAA,lJAAIF,kEAAuB,CAAA,sDAAeA;IAClDG,OAAK,AAACC,8CAAMC,mBAASN;IACrBO,qBAAmB,AAAA,qGAAgBH;IACnCI,wBAAsB,WAAAC;AAAA,AAAA,IAAAC,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;aAAA,AAAAE,4CAAAF,eAAA,pEAAaG;eAAb,AAAAD,4CAAAF,eAAA,tEAAoBI;AAApB,AACE,GAAI,oDAAA,pDAACC,6CAAEF;AACL,AAAI,aAAA,bAACG;;AACD,QAACC,yEAAAA,2EAAAA;;AACL,oBAAMV;AAAN,AACE,IAAAW,WAAA,2CAAA,iEAAA,PAA6BL,qEAAiBC;AAA9C,AAAA,4GAAAI,yCAAAA,7IAACX,mDAAAA,6DAAAA;;AADH;;;;AARhC,AAUE,IAAAY,WAAQpB;IAARqB,WAAY,4GAAA,2CAAA,mEAAA,2EAAA,qDAAA,8DAAA,KAAA,7ZAACC,uGAAMjB,2GACUD,kRAGMK;AAJnC,AAAA,oFAAAW,SAAAC,6BAAAD,SAAAC,3HAACtB,uCAAAA,0DAAAA;;;AAXL,CAAA,+DAAA,/DAAMP;;AAAN;AAAA,CAAA,yDAAA,WAAAC,pEAAMD;AAAN,AAAA,IAAAE,WAAA,AAAAC,gBAAAF;IAAAA,eAAA,AAAAG,eAAAH;IAAAI,WAAA,AAAAF,gBAAAF;IAAAA,eAAA,AAAAG,eAAAH;AAAA,AAAA,IAAAK,qBAAA;AAAA,AAAA,OAAAA,wDAAAJ,SAAAG,SAAAJ;;;AAAA","names":["workout-demo-frontend.state/logged-in?","reagent.core.atom","var_args","args__5775__auto__","len__5769__auto__","i__5770__auto__","argseq__5776__auto__","cljs.core/IndexedSeq","workout-demo-frontend.state/api-call","seq28113","G__28114","cljs.core/first","cljs.core/next","G__28115","self__5754__auto__","method","url","params","token","workout-demo-frontend.state/get-token","headers","opts","cljs.core.apply","cljs.core/hash-map","user-error-handler","default-error-handler","p__28116","map__28117","cljs.core/--destructure-map","cljs.core.get","status","response","cljs.core._EQ_","js/console.warn","workout-demo-frontend.state/logout!","G__28118","G__28119","G__28120","cljs.core.merge"],"sourcesContent":["(ns workout-demo-frontend.state\n    (:require [reagent.core :as r]))\n\n(def logged-in? (r/atom nil))\n\n(defn api-call [method url & params]\n  (let [token (get-token)\n        headers (if token {\"Authorization\" (str \"Bearer \" token)} {})\n        opts (apply hash-map params)\n        user-error-handler (:error-handler opts)\n        default-error-handler (fn [{:keys [status response]}]\n                                (if (= status 401)\n                                  (do (js/console.warn \"Unauthorized! Logging out.\")\n                                      (logout!))\n                                  (when user-error-handler\n                                    (user-error-handler {:status status :response response}))))] ;; Call custom handler if exists\n    (method url (merge opts\n                       {:headers headers\n                        :response-format :json\n                        :keywords? true\n                        :error-handler default-error-handler}))))"]}